<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Pato Movible</title>

    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: lightblue;
        }

        /* El pato en pantalla */
        #duck {
            width: 60px;
            height: 60px;
            background: yellow;
            position: absolute;
            top: 200px;
            left: 200px;
            border-radius: 15px;
            border: 3px solid orange;
        }
    </style>
</head>

<body>

    <!-- El pato visible -->
    <div id="duck"></div>

    <script src="../Scripts/Objs/gameItem.js"></script>
    <script src="../Scripts/Objs/Duck.js"></script>
    <script>
        // Crear pato
        const duckElement = document.getElementById("duck");
        const pato = new Duck(duckElement);

        // Rastrear teclas presionadas
        const pressedKeys = new Set();

        window.addEventListener("keydown", (event) => {
            pressedKeys.add(event.key);
        });

        window.addEventListener("keyup", (event) => {
            pressedKeys.delete(event.key);
        });

        // Bucle de juego para movimiento continuo
        function gameLoop() {
            if (pato._state === 1) { // STUNNED
                requestAnimationFrame(gameLoop);
                return;
            }

            let dx = 0;
            let dy = 0;

            if (pressedKeys.has("ArrowUp")) dy -= pato._speed;
            if (pressedKeys.has("ArrowDown")) dy += pato._speed;
            if (pressedKeys.has("ArrowLeft")) dx -= pato._speed;
            if (pressedKeys.has("ArrowRight")) dx += pato._speed;

            pato.x += dx;
            pato.y += dy;
            pato.render();

            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>

</body>

</html>